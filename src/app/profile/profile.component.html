<div class="profile-container">
    <h2>Mon Profil</h2>

    <!-- Current Info Section -->
    <div class="current-info">
        <h3>Informations Actuelles</h3>
        <div *ngIf="currentUser.imageUrl" class="avatar-container">
            <img 
                [src]="'http://localhost:8080/' + currentUser.imageUrl" 
                alt="Image de Profil" 
                class="avatar" 
                (click)="fileInput.click()"
            />
        </div>
    </div>

    <!-- Form Section -->
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="profile-form">
        <div class="form-row">
            <div class="form-group half">
                <label for="nom">Nom :</label>
                <input 
                    id="nom" 
                    formControlName="nom" 
                    type="text" 
                    class="form-control" 
                    placeholder="eg. Alaa" 
                    required
                />
                <div *ngIf="userForm.get('nom')?.invalid && userForm.get('nom')?.touched" class="error">
                    Le nom est requis.
                </div>
            </div>

            <div class="form-group half">
                <label for="prenom">Prénom :</label>
                <input 
                    id="prenom" 
                    formControlName="prenom" 
                    type="text" 
                    class="form-control" 
                    placeholder="eg. Mohamed"
                    required
                />
            </div>
        </div>

        <div class="form-group">
            <label for="email">Email :</label>
            <input 
                id="email" 
                formControlName="email" 
                type="email" 
                class="form-control" 
                placeholder="eg. alaa.mohamed"
                required
            />
        </div>

        <div class="form-row">
            <div class="form-group half">
                <label for="phone">Téléphone :</label>
                <input 
                    id="phone" 
                    formControlName="phone" 
                    type="tel" 
                    class="form-control" 
                    placeholder="Téléphone"
                />
            </div>
        </div>

        <!-- Current Password Field -->
        <div class="form-group">
            <label for="currentPassword">Mot de Passe Actuel :</label>
            <input 
                id="currentPassword" 
                formControlName="currentPassword" 
                type="password" 
                class="form-control" 
                placeholder="Mot de passe actuel"
                required
            />
            <div *ngIf="userForm.get('currentPassword')?.invalid && userForm.get('currentPassword')?.touched" class="error">
                Le mot de passe actuel est requis.
            </div>
        </div>

        <!-- New Password Field -->
        <div class="form-group">
            <label for="password">Nouveau Mot de Passe :</label>
            <input 
                id="password" 
                formControlName="password" 
                type="password" 
                class="form-control" 
                placeholder="Nouveau mot de passe"
            />
        </div>

        <!-- Confirm Password Field -->
        <div class="form-group">
            <label for="confirmPassword">Confirmer Mot de Passe :</label>
            <input 
                id="confirmPassword" 
                formControlName="confirmPassword" 
                type="password" 
                class="form-control" 
                placeholder="Confirmer le mot de passe"
            />
            <div *ngIf="userForm.get('confirmPassword')?.value && userForm.get('confirmPassword')?.value !== userForm.get('password')?.value" class="error">
                Les mots de passe ne correspondent pas.
            </div>
        </div>

        <!-- Profile Image Field -->
        <div class="form-group">
            <label for="image">Image de Profil :</label>
            <input 
                id="image" 
                type="file" 
                (change)="onFileChange($event)" 
                class="form-control-file" 
                #fileInput 
                style="display: none;"  
            />
            <button type="button" (click)="fileInput.click()" class="btn btn-secondary">Changer d'image</button>
        </div>

        <div *ngIf="imagePreview" class="image-preview">
            <img [src]="imagePreview" alt="Aperçu de l'image" />
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
           
            <button type="submit" [disabled]="userForm.invalid" class="btn btn-primary">Modifier</button>
        </div>
    </form>
</div>
